# 해외 직구 구매 대행 관리 시스템

## 🔐 새로운 기능: 회원 인증 시스템 + 데이터 암호화

### ✨ Firebase Authentication + 엔드투엔드 암호화
- **회원가입**: 이메일/비밀번호 + 상호명 입력
- **로그인/로그아웃**: 안전한 인증 시스템
- **비밀번호 찾기**: 이메일로 비밀번호 재설정 링크 발송
- **🔐 자동 데이터 암호화**:
  - 로그인 비밀번호로 모든 데이터 자동 암호화
  - 거래 내역, 커스텀 브랜드/사이트 모두 암호화 저장
  - **Firebase 관리자도 데이터 내용을 볼 수 없음**
  - AES-256 암호화 사용 (CryptoJS)
- **계정 정보 관리**:
  - 상호명 변경
  - 비밀번호 변경
  - 현재 비밀번호 확인 후 변경
- **회원탈퇴**: 모든 데이터와 함께 계정 완전 삭제
- **사용자별 데이터 분리**: 각 사용자의 거래 내역과 설정이 완전히 독립적으로 관리

### 🏢 상호명 기능
- 회원가입 시 상호명 입력 필수
- 로그인 후 헤더에 상호명 표시
- 계정 정보에서 언제든지 변경 가능
- 이메일은 작은 글씨로 하단에 표시

### 🛡️ 보안 기능

**엔드투엔드 암호화 (E2EE)**
- 로그인 비밀번호 → 암호화 키 자동 생성 (PBKDF2)
- 모든 데이터를 AES-256으로 암호화하여 저장
- Firebase에는 암호화된 데이터만 저장됨
- **Firebase 관리자도 내용을 볼 수 없음**
- 암호화 키는 세션 스토리지에 임시 저장 (탭 닫으면 삭제)
- 로그아웃 시 암호화 키 자동 삭제

**암호화되는 데이터**
- ✅ 거래 내역 (구매자 정보, 상품 정보, 가격 등 모든 데이터)
- ✅ 커스텀 브랜드 목록
- ✅ 커스텀 구매사이트 목록
- ❌ 이메일 주소 (Firebase Authentication 특성상 평문)
- ❌ 상호명 (displayName, 평문)

**일반 보안**
- 비밀번호는 6자 이상 필수
- 비밀번호 변경 시 현재 비밀번호 확인
- 비밀번호 재설정 이메일 발송
- 회원탈퇴 시 이중 확인 (확인 메시지 + "탈퇴" 입력)
- 사용자별 데이터 완전 격리
- Firebase 보안 규칙으로 다른 사용자 데이터 접근 차단

**⚠️ 중요한 주의사항**
- **비밀번호를 잊어버리면 데이터를 복구할 수 없습니다!**
- Firebase의 비밀번호 재설정으로 새 비밀번호를 설정해도,
- 이전 비밀번호로 암호화된 데이터는 복호화할 수 없습니다.
- **브라우저 탭을 닫으면 암호화 키가 삭제되어 재로그인이 필요합니다.**
- 비밀번호 관리에 각별히 주의하세요!

## 🚀 주요 기능

### ✨ UI/UX 개선
- **탭 구조**: 통계와 거래 내역을 탭으로 깔끔하게 분리
- **모달 방식 거래 등록**: 플로팅 버튼(➕)으로 어디서든 쉽게 등록
- **심플한 메인 페이지**: 필요한 정보만 한눈에 표시

### 📊 핵심 기능

1. **통계 대시보드**
   - 총 매출, 총 비용, 순이익, 평균 마진률
   - **통계 전용 기간 필터** (오늘/이번주/이번달/최근3개월/최근6개월/올해/전체/직접입력)
   - **💡 중요**: 통계와 거래내역의 필터는 **완전히 독립적**으로 작동
   - **📈 다양한 통계 그래프**
     - 매출/비용/이익 추이 (라인 차트) - **기간별 자동 전환**
       - 이번 주: 일별 추이 (7일)
       - 이번 달: 일별 추이 (최대 31일)
       - 최근 3개월: 주별 추이 (약 13주)
       - 최근 6개월 이상: 월별 추이 (최대 12개월)
       - **직접입력**: 기간 일수에 따라 자동 전환
         - 31일 이내 → 일별
         - 31~93일 → 주별
         - 93일 초과 → 월별
     - 구매사이트별 거래 비율 (도넛 차트)
     - 판매 플랫폼별 매출 (바 차트)
     - 통화별 거래 건수 (바 차트)
     - 브랜드별 Top 10 매출 (수평 바 차트)

2. **🖩 마진율 계산기 (NEW!)**
   - 거래 등록 없이 마진율 시뮬레이션
   - 실시간 환율 자동 적용 (모달 열 때마다)
   - 구매가격, 판매가격, 플랫폼 수수료, 비용 입력
   - 즉시 계산: 총 비용, 순이익, 마진율
   - 수익성 검토, 적정가 산정, 플랫폼 비교
   - 🔄 초기화 기능으로 여러 시나리오 테스트

3. **거래 내역 관리**
   - **구매일자 기준 정렬** - 최신 구매일자가 상단에 표시
   - **거래내역 전용 필터** (구매자, 브랜드, 품명, 구매사이트, 판매플랫폼, 통화, **구매연도**)
   - **💡 중요**: 거래내역 필터는 **통계와 완전히 독립적**으로 작동 (전체 기간 대상)
   - **거래 수정 기능** - 각 거래 카드에서 바로 수정 가능
   - **개별 거래 삭제** - 각 거래별로 삭제 가능
   - 엑셀 다운로드 (구매일자 기준 정렬)

4. **거래 등록**
   - 구매자 정보 (이름, 연락처, 배송지 주소)
   - 상품 정보 (브랜드, 품명, 수량)
   - 구매사이트 선택
   - **상품 URL** (구매한 상품 링크 저장 - 선택사항)
   - 가격 정보
     - **구매가격 + 통화 + 환율** (예: 100 USD, 환율 1,330원)
     - **배송 방식 선택** (직배송/배대지)
     - **해외배송비 + 통화 + 환율** (기본: 원화 KRW, 환율 1.0)
     - 판매가격 (원화)
   - **🔄 실시간 환율 자동 업데이트** (ExchangeRate-API)
   - **판매 플랫폼 선택** (쿠팡 10.0%, 네이버 6.0%, 11번가 11.0%, G마켓 10.0%, 옥션 10.0%)
   - 비용 정보 (관부과세, 국내배송비 기본값 5,000원)
   - 실시간 계산 (총 비용, 순이익, 마진률)
   - **수수료 자동 입력** (수정 가능)
   - **각 통화별 환율 자동 입력** (구매가격 통화 ≠ 배송비 통화 가능)

### 🔥 Firebase 연동
- **실시간 동기화**: 여러 기기에서 데이터 공유
- **자동 백업**: 클라우드에 안전하게 저장
- **오프라인 지원**: Firebase 미설정 시 로컬스토리지 사용
- **이중 백업 전략**: Firebase + 로컬스토리지 동시 저장으로 데이터 안전성 보장
- **자동 복구**: Firebase 실패 시 로컬스토리지로 자동 전환

---

## ✨ 새로운 기능: 동적 드롭다운 + 검색

### 🎯 브랜드와 구매사이트 직접 추가

드롭다운 목록에 원하는 항목을 **직접 추가**할 수 있습니다!

#### 브랜드 추가하기
1. 거래 등록 모달에서 브랜드 드롭다운 옆 **➕ 버튼** 클릭
2. 새 브랜드 이름 입력 (예: "Uniqlo", "Zara")
3. 자동으로 드롭다운에 추가되고 선택됨
4. **필터에도 자동 반영** - 다음부터 필터에서도 선택 가능!
5. 🔥 **Firebase에 저장** - 모든 기기에서 동기화!

#### 구매사이트 추가하기
1. 구매사이트 드롭다운 옆 **➕ 버튼** 클릭
2. 새 사이트 이름 입력 (예: "Walmart", "ASOS")
3. 자동으로 드롭다운에 추가되고 선택됨
4. **필터에도 자동 반영** - 필터에서도 즉시 사용 가능!
5. 🔥 **Firebase에 저장** - 모든 기기에서 동기화!

### 🔍 스마트 검색 필터

**브랜드 & 구매사이트 필터**가 검색 가능한 드롭다운으로 업그레이드!

**필터에 표시되는 항목:**
- ✅ 모달에서 추가한 항목 (모달 = 필터 완전 동기화)
- ✅ 기본 제공 항목도 모달에 있는 것만 표시
- ❌ 모달에 없으면 필터에도 없음

#### 사용 방법
1. **드롭다운 선택**: 화살표 클릭 → 목록에서 선택
2. **검색 입력**: 
   - "Nik" 입력 → "Nike" 자동 제안
   - "ama" 입력 → "Amazon" 자동 제안
3. **자유 입력**: 드롭다운에 없는 값도 검색 가능
   - "직접 입력"으로 등록한 브랜드도 검색됨
   - "기타"로 등록한 구매사이트도 검색됨

**특징:**
- 💾 **Firebase에 저장**: 클라우드에 안전하게 보관 🔥
- 🔄 **모든 기기에서 동기화**: PC, 태블릿, 스마트폰 어디서나 동일하게 사용 ✨
- 📱 **실시간 동기화**: 한 기기에서 추가하면 다른 기기에도 즉시 반영
- 🚫 **중복 방지**: 같은 이름은 추가되지 않음
- 📝 **언제든지 추가**: 필요할 때마다 바로 추가
- 🔍 **완전 동기화**: 모달에 추가 → 필터에도 자동 반영
- 📊 **정렬 최적화**: "기타" 항목은 항상 맨 아래에 표시
- 🎯 **스마트 검색**: 드롭다운 + 검색 + 자유 입력 모두 가능
- 🛡️ **자동 폴백**: Firebase 오류 시 로컬스토리지 사용

**🔗 모달 ↔️ 필터 ↔️ Firebase 동기화:**
- 모달에서 ➕로 추가한 브랜드 → Firebase에 저장 → 필터에도 즉시 표시
- 모달에서 ❌로 삭제한 브랜드 → Firebase에서 삭제 → 필터에서도 사라짐
- 모달의 기본 브랜드(Nike, Adidas 등) → 필터에도 표시
- **다른 기기에서도 동일한 목록 사용 가능!** 🌐
- 필터는 모달의 완벽한 미러링!

**기본 제공 항목:**
- **브랜드**: Nike, Adidas, Apple, Samsung, Sony + 직접 입력
- **구매사이트**: Amazon, eBay, AliExpress, 楽天, iHerb, Costco + 기타

---

## 🔧 Firebase 설정

### ⚠️ 중요: 반드시 설정해야 합니다!

이 애플리케이션을 사용하려면 Firebase Console에서 다음 설정이 **필수**입니다:

1. **Firebase Authentication** 활성화
2. **Firestore Database** 생성
3. **Firestore 보안 규칙** 설정

**👉 자세한 설정 방법은 [FIREBASE_SETUP.md](FIREBASE_SETUP.md) 파일을 참조하세요!**

설정하지 않으면:
- ❌ 로그인/회원가입 불가
- ❌ 데이터 저장/불러오기 불가
- ❌ 회원탈퇴 시 오류 발생

### ✅ 이미 설정 완료!

이 프로젝트는 **Firebase가 이미 설정되어 있습니다**. 파일을 열면 바로 사용 가능합니다!

- 🟢 **온라인 모드 활성화**: 여러 기기에서 데이터 동기화
- 💾 **자동 백업**: 클라우드에 안전하게 저장
- 🔄 **실시간 동기화**: 변경사항 즉시 반영

**프로젝트 정보:**
- Project ID: `multisell-d0df0`
- Database: Cloud Firestore
- Authentication: Email/Password

### 🚀 빠른 시작

**처음 사용하는 경우:**
1. **[FIREBASE_SETUP.md](FIREBASE_SETUP.md)** 파일을 열어 Firebase 설정 가이드를 따라하세요
2. 모든 설정이 완료되면 웹 페이지를 열고 회원가입하세요
3. 로그인 후 바로 사용 가능합니다!

### 다른 Firebase 프로젝트 사용하려면?

`script.js` 파일의 상단에서 `firebaseConfig` 부분을 수정하세요:

```javascript
const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.firebasestorage.app",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID",
    measurementId: "YOUR_MEASUREMENT_ID"
};
```

그 후 **[FIREBASE_SETUP.md](FIREBASE_SETUP.md)** 파일의 설정 가이드를 따라하세요.

---

## 💱 실시간 환율 API

### 🌐 자동 환율 업데이트

**ExchangeRate-API**를 사용하여 최신 환율 정보를 자동으로 가져옵니다!

#### 특징
- 🔄 **모달 열 때마다 자동 업데이트** (➕ 버튼 클릭 시)
- 🌍 **6개 통화 지원**: KRW, USD, EUR, GBP, JPY, CNY
- 🆓 **무료 API 사용** (API 키 불필요)
- ⚡ **실시간 환율 정보**
- ⏰ **업데이트 시간 표시**
- 🇰🇷 **원화 결제 지원** (환율 1.0 자동 설정)
- 🇺🇸 **기본 통화 USD** (자동으로 최신 환율 적용)

#### 사용 방법

1. **자동 입력** (기본):
   - **➕ 버튼 클릭 시**: 최신 환율 자동 가져오기 ⚡
   - USD 환율 자동으로 입력됨 (기본 선택)
   - 통화 변경 시 → 해당 환율 자동 입력
   - 예: EUR로 변경 → 1,450.30원 자동 표시

2. **수동 업데이트**:
   - 환율 필드 옆 🔄 버튼 클릭
   - 최신 환율로 즉시 업데이트

3. **수동 수정**:
   - 자동 입력된 환율도 수정 가능
   - 원하는 환율로 직접 입력

4. **원화 결제**:
   - 통화 선택: KRW (원화)
   - 환율 자동으로 1.0 고정
   - 국내 구매 시 편리하게 사용

#### 지원 통화
- 🇰🇷 **KRW** (한국 원화) - 환율 1.0 고정
- 🇺🇸 **USD** (미국 달러) - **기본값**, 모달 열 때마다 최신 환율 자동 적용
- 🇪🇺 **EUR** (유로)
- 🇬🇧 **GBP** (영국 파운드)
- 🇯🇵 **JPY** (일본 엔화)
- 🇨🇳 **CNY** (중국 위안)

#### 업데이트 정보
- 환율 필드 하단에 "최종 업데이트: MM월 DD일 HH:MM" 표시
- 업데이트 실패 시 "업데이트 실패 (수동 입력 가능)" 메시지

---

## 📱 사용 방법

### 처음 시작하기
1. **회원가입**
   - 웹 페이지 접속 시 로그인/회원가입 화면 표시
   - "회원가입" 탭 클릭
   - 상호명, 이메일, 비밀번호(6자 이상) 입력
   - 비밀번호 확인 후 "회원가입" 버튼 클릭
   
2. **로그인**
   - "로그인" 탭 클릭
   - 가입한 이메일과 비밀번호 입력
   - "로그인" 버튼 클릭
   - 헤더에 상호명과 이메일이 표시됨

3. **비밀번호를 잊었다면**
   - 로그인 화면에서 "비밀번호를 잊으셨나요?" 클릭
   - 가입한 이메일 주소 입력
   - 이메일로 발송된 비밀번호 재설정 링크 클릭
   - 새 비밀번호 설정

4. **계정 정보 관리**
   - 로그인 후 상단 헤더의 "⚙️ 계정 정보" 버튼 클릭
   - **상호명 변경**: 새 상호명 입력 후 "상호명 변경" 클릭
   - **비밀번호 변경**:
     - 현재 비밀번호 입력
     - 새 비밀번호 입력 (6자 이상)
     - 새 비밀번호 확인
     - "비밀번호 변경" 클릭

5. **로그아웃**
   - 상단 헤더의 "로그아웃" 버튼 클릭
   - 확인 후 로그아웃 (로그인 화면으로 이동)

6. **회원탈퇴**
   - 상단 헤더의 "회원탈퇴" 버튼 클릭
   - 첫 번째 확인 메시지에서 "확인" 클릭
   - "탈퇴" 라고 정확히 입력하여 최종 확인
   - 모든 데이터가 삭제되며 로그인 화면으로 이동

### 거래 등록하기
1. 우측 하단의 **➕ 버튼** 클릭
   - ⚡ **이 순간 최신 환율 자동 가져오기!**
2. 모달에서 거래 정보 입력
   - 브랜드가 목록에 없으면? **➕ 버튼**으로 추가!
   - 구매사이트가 없으면? **➕ 버튼**으로 추가!
   - **통화는 기본 USD**, **환율은 이미 입력됨** (방금 가져온 최신 환율!)
   - 다른 통화 선택 시 자동으로 환율 변경 (🔄 버튼으로 재업데이트 가능)
   - 판매 플랫폼 선택 시 수수료 자동 입력 (수정 가능)
   - 관부과세, 국내배송비 입력
3. 실시간으로 계산 결과 확인
4. "등록하기" 버튼 클릭

### 거래 수정하기
1. **📋 거래 내역** 탭에서 수정할 거래 찾기
2. 거래 카드의 **"수정"** 버튼 클릭
3. 모달에 기존 데이터가 자동으로 채워짐
4. 원하는 항목 수정
5. "등록하기" 버튼 클릭하여 변경사항 저장

### 🖩 마진율 계산기 사용하기 (NEW!)
1. 우측 하단의 **🖩 버튼** 클릭
   - ⚡ **최신 환율 자동 가져오기!**
2. 계산기 모달에서 정보 입력
   - **구매가격 + 통화**: 상품 가격 (예: 100 USD)
   - **구매가격 환율**: 자동 입력됨 (🔄 버튼으로 재업데이트 가능)
   - **해외배송비 + 통화**: 해외 → 한국 배송비 (기본: 원화 KRW, 선택사항)
   - **배송비 환율**: 자동 입력됨 (기본: 1.0, 🔄 버튼으로 재업데이트 가능)
     - ✨ **구매가격 통화 ≠ 배송비 통화** 설정 가능!
   - **판매가격**: 원화로 판매할 가격
   - **플랫폼**: 판매 플랫폼 선택 → 수수료 자동 입력
     - ※ 품목(카테고리)에 따라 실제 수수료율은 다를 수 있습니다
   - **관부과세, 국내배송비**: 추가 비용 입력 (국내배송비 기본값: 5,000원)
3. **실시간으로 계산 결과 확인**
   - 💰 총 비용
   - 📈 순이익 (녹색: 이익, 빨강: 손실)
   - 📊 마진율 (%)
4. **🔄 초기화 버튼**으로 다시 계산 가능
5. **거래 등록 없이** 시뮬레이션만 가능!

**활용 예시:**
- 💡 구매 전 수익성 검토
- 💡 적정 판매가 산정
- 💡 여러 플랫폼 비교
- 💡 환율 변동 시뮬레이션

### 통계 확인하기
1. **📊 통계** 탭 선택
2. **통계 전용 기간 선택** (오늘/이번주/이번달/최근3개월/최근6개월/올해/전체/직접입력)
3. 총 매출, 총 비용, 순이익, 평균 마진률 확인
4. **다양한 그래프로 데이터 시각화**
   - **기간별 자동 전환**: 이번 주는 일별, 최근 3개월은 주별, 그 이상은 월별 추이
   - 사이트/플랫폼별 비중 확인
   - 인기 브랜드 발굴

**💡 중요**: 통계의 기간 필터는 통계 탭에만 적용되며, 거래내역 탭과는 **완전히 독립적**입니다.

### 거래 내역 조회하기
1. **📋 거래 내역** 탭 선택
2. **거래내역 전용 필터로 검색** (전체 기간 대상)
   - **브랜드**: 드롭다운 선택 + 직접 검색 가능
     - 드롭다운에서 선택하거나
     - 타이핑해서 검색 (예: "Nik" 입력 → "Nike" 자동 필터링)
   - **구매사이트**: 드롭다운 선택 + 직접 검색 가능
     - 추가한 사이트도 모두 표시됨
     - "기타" 항목은 항상 맨 아래 표시
   - 구매자 이름, 품명으로 검색
   - 판매 플랫폼, 통화 필터링
   - **구매 연도**: 거래 데이터에서 자동 추출된 연도 선택

**💡 중요**: 거래내역 필터는 거래 목록에만 적용되며, 통계 탭과는 **완전히 독립적**입니다.
3. **📅 구매일자 기준 정렬**: 최신 구매일자가 상단에 표시
4. 실시간으로 결과 확인 (전체 N건 표시)
5. 거래 카드에서 **수정** 또는 **삭제** 선택

**검색 기능 특징:**
- 📝 **부분 일치 검색**: "Nik" 입력 → "Nike" 찾기
- 🔽 **드롭다운 제안**: 타이핑하면 관련 항목 자동 표시
- ✍️ **자유 입력 가능**: 드롭다운에 없는 값도 검색 가능
- 🎯 **"기타" 항목**: 항상 맨 아래 고정

### 데이터 관리
- **엑셀 다운로드**: 필터링된 결과를 CSV 파일로 다운로드
  - **파일명 형식**: `해외직구거래내역_[필터]_[다운로드날짜].csv`
    - 기본 (필터 없음): `해외직구거래내역_전체_2025-12-30.csv`
    - 브랜드 필터: `해외직구거래내역_Nike_2025-12-30.csv`
    - 연도 필터: `해외직구거래내역_2024년_2025-12-30.csv`
    - 복수 필터: `해외직구거래내역_홍길동_Nike_쿠팡_2025년_2025-12-30.csv`
  - **구매일자 기준 정렬**: 최신 구매일자가 첫 번째 행
  - **적용 필터**: 구매자명, 브랜드, 품명, 구매사이트, 플랫폼, 통화, **구매연도**
  - 포함 항목: 구매일자, 구매자 정보 (이름, 연락처, 주소), 상품 정보 (브랜드, 품명, 수량)
  - 구매 정보: 구매사이트, **상품URL**
  - 가격 정보: 구매가격, 구매가격통화, 구매가격환율
  - 배송 정보: **배송방식 (직배송/배대지)**, 해외배송비, 배송비통화, 배송비환율
  - 원화 환산: 구매가격(원), 해외배송비(원)
  - 비용 정보: 판매가격, 수수료, 관부과세, 국내배송비, 총비용
  - 수익 정보: 순이익, 마진률
- **거래 수정**: 각 거래의 모든 정보 수정 가능 (Firebase + 로컬 자동 동기화)
- **개별 삭제**: 각 거래 카드의 "삭제" 버튼

---

## 🔄 Firebase vs 로컬스토리지

| 기능 | Firebase | 로컬스토리지 |
|------|----------|--------------|
| 데이터 저장 위치 | 클라우드 | 브라우저 |
| 여러 기기 동기화 | ✅ 지원 | ❌ 미지원 |
| 백업 | ✅ 자동 | ✅ 이중 백업* |
| 인터넷 필요 | ✅ 필요 | ❌ 불필요 |
| 설정 필요 | ✅ 필요 | ❌ 불필요 |
| 데이터 복구 | ✅ 자동 | ✅ 로컬 백업 |

**이중 백업*: Firebase 활성화 시에도 로컬스토리지에 동시 저장하여 데이터 손실 방지

**Firebase 미설정 시**: 자동으로 로컬스토리지 사용 (오프라인 모드)

---

## 🛠️ 기술 스택

- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **Database**: Firebase Firestore (선택) / LocalStorage
- **Authentication**: Firebase Authentication (Email/Password)
- **Encryption**: CryptoJS 4.1.1 (AES-256, PBKDF2)
- **Charts**: Chart.js 4.4.0 (통계 그래프)
- **Exchange Rate API**: ExchangeRate-API (무료, 실시간 환율)
- **UI/UX**: 모달, 탭, 플로팅 버튼
- **반응형**: 모바일 최적화

---

## 🔥 Firebase 동기화

### 🌐 모든 기기에서 동일한 데이터

**Firebase Firestore**를 사용하여 데이터를 클라우드에 저장합니다!

#### 동기화되는 데이터
1. **거래 내역**: 모든 거래 정보 (구매, 판매, 비용 등)
2. **커스텀 브랜드**: 사용자가 추가한 브랜드 목록
3. **커스텀 구매사이트**: 사용자가 추가한 구매사이트 목록

#### 작동 방식
```
PC에서 브랜드 추가 "H&M"
    ↓
Firebase에 저장 ☁️
    ↓
모든 기기에 즉시 반영
    ↓
스마트폰에서도 "H&M" 선택 가능 ✅
```

#### 장점
- 📱 **멀티 디바이스**: PC, 태블릿, 스마트폰 어디서나 접근
- 🔄 **실시간 동기화**: 한 곳에서 변경하면 모든 곳에 반영
- ☁️ **클라우드 저장**: 브라우저 삭제해도 데이터 안전
- 🚀 **즉시 적용**: 추가/삭제 즉시 반영
- 🛡️ **자동 백업**: Firebase가 자동으로 백업 관리

#### Firebase 비활성화 시
- 로컬스토리지로 자동 전환
- 해당 브라우저에서만 데이터 유지
- 동기화 상태 표시 변경 (🔴 오프라인)

---

## 📝 주의사항

1. **회원 인증 & 데이터 암호화**: 
   - 회원가입 시 유효한 이메일 주소 필요 (비밀번호 재설정에 사용)
   - 상호명은 언제든지 변경 가능
   - 비밀번호는 6자 이상 필수
   - **⚠️ 비밀번호를 절대 잊어버리면 안 됩니다!**
     - 비밀번호를 잊으면 모든 데이터를 복구할 수 없습니다
     - 비밀번호 재설정을 해도 이전 데이터는 복호화 불가능
     - 비밀번호를 안전한 곳에 기록해두세요
   - **⚠️ 브라우저 탭을 닫으면 재로그인이 필요합니다**
     - 암호화 키는 세션 스토리지에 저장됩니다
     - 탭을 닫으면 암호화 키가 자동 삭제됩니다
     - 다시 열 때 재로그인해야 데이터를 볼 수 있습니다
   - 비밀번호 변경 시:
     - 현재 비밀번호 확인 필요
     - 새 비밀번호로 모든 데이터 재암호화됨
     - 비밀번호 변경 후 다른 기기에서는 로그아웃됨
   - 회원탈퇴 시 모든 데이터가 영구 삭제됨 (복구 불가)
   
2. **Firebase 보안**: 
   - 실제 운영 시 Firestore 보안 규칙 필수 적용
   - Authentication 활성화 필수
   - 각 사용자는 본인 데이터만 접근 가능
   - 데이터는 암호화되어 저장됨
   
3. **데이터 백업**: 
   - 중요한 데이터는 정기적으로 엑셀 다운로드 권장
   - Firebase와 로컬스토리지 이중 백업 사용
   - **엑셀 다운로드된 파일은 복호화된 평문입니다**
   - 안전한 곳에 보관하세요
   
4. **브라우저 호환**: 최신 Chrome, Firefox, Safari, Edge 사용 권장

5. **커스텀 드롭다운**: 
   - Firebase 활성화 시 사용자별로 독립적으로 관리됨
   - 암호화되어 저장됨
   - 같은 계정으로 로그인하면 모든 기기에서 동기화됨
   
6. **인터넷 연결**: 
   - 로그인/회원가입/비밀번호 재설정 시 인터넷 연결 필수
   - 계정 정보 변경 시 인터넷 연결 필요
   - 커스텀 항목 추가/삭제 시 인터넷 연결 필요

---

## 🆘 문제 해결

### 로그인/회원가입 관련

**로그인이 안 돼요**
- 이메일과 비밀번호가 정확한지 확인
- 인터넷 연결 확인
- 브라우저 콘솔(F12)에서 오류 메시지 확인
- Firebase Authentication이 활성화되었는지 확인

**회원가입이 안 돼요**
- 상호명을 입력했는지 확인
- 유효한 이메일 형식인지 확인
- 비밀번호가 6자 이상인지 확인
- 비밀번호와 비밀번호 확인이 일치하는지 확인
- 이미 가입된 이메일인지 확인

**비밀번호를 잊었어요**
- ⚠️ **중요**: 비밀번호를 잊으면 데이터를 복구할 수 없습니다!
- 로그인 화면에서 "비밀번호를 잊으셨나요?" 클릭
- 가입한 이메일 주소 입력
- 이메일함(스팸 포함)에서 비밀번호 재설정 이메일 확인
- 링크 클릭하여 새 비밀번호 설정
- **주의**: 새 비밀번호로는 이전 데이터를 복호화할 수 없습니다
- 데이터를 포기하고 새로 시작하거나, 비밀번호를 기억해내야 합니다

**데이터가 복호화되지 않아요 / 빈 데이터로 보여요**
- 잘못된 비밀번호로 로그인했을 가능성
- 비밀번호를 변경했다면 이전 비밀번호로는 데이터 복호화 불가
- 올바른 비밀번호로 다시 로그인하세요
- 브라우저 콘솔(F12)에서 복호화 오류 확인

**"암호화 키가 없습니다" 오류가 나요**
- 브라우저 탭을 닫았다가 다시 열었을 때 발생
- 세션 스토리지에서 암호화 키가 삭제되었습니다
- 다시 로그인하면 해결됩니다
- 로그아웃하지 않고 탭만 닫아도 재로그인이 필요합니다

**브랜드/구매사이트 추가 버튼이 작동하지 않아요**
- 암호화 키가 있는지 확인 (재로그인)
- 브라우저 콘솔(F12)에서 오류 메시지 확인
- 인터넷 연결 확인

**비밀번호 변경이 안 돼요**
- 현재 비밀번호를 정확히 입력했는지 확인
- 새 비밀번호가 6자 이상인지 확인
- 새 비밀번호와 확인이 일치하는지 확인
- 오래 전에 로그인했다면 로그아웃 후 다시 로그인

**상호명이 표시되지 않아요**
- 회원가입 시 상호명을 입력했는지 확인
- "계정 정보"에서 상호명 설정/변경 가능

**회원탈퇴가 안 돼요**
- Firestore 보안 규칙 확인 (위의 권한 오류 참조)
- 최근에 로그인했는지 확인 (오래된 로그인은 재로그인 필요)
- "탈퇴"를 정확히 입력했는지 확인

### Firebase 연결 실패
- 설정 정보가 올바른지 확인
- 인터넷 연결 확인
- 브라우저 콘솔(F12)에서 오류 메시지 확인
- Firestore 데이터베이스가 생성되었는지 확인

### "Missing or insufficient permissions" 오류
⚠️ **가장 흔한 오류입니다!**
- **원인**: Firestore 보안 규칙이 설정되지 않음
- **해결**: [FIREBASE_SETUP.md](FIREBASE_SETUP.md) 파일의 **3단계** 참조
- Firebase Console → Firestore Database → 규칙 탭에서 보안 규칙 설정
- 설정 후 페이지 새로고침

### 회원탈퇴가 실패함
- Firestore 보안 규칙 확인 (위의 권한 오류 참조)
- 최근에 로그인했는지 확인 (오래된 로그인은 재로그인 필요)
- "탈퇴"를 정확히 입력했는지 확인

### 새로고침 시 데이터가 사라짐
- Firebase 설정이 올바른지 확인 (script.js의 firebaseConfig)
- 브라우저 콘솔에서 "✅ Firebase에서 N개 거래 불러옴" 메시지 확인
- Firebase 연결 실패 시 로컬스토리지에서 자동으로 불러옴
- 우측 상단 상태 확인: 🟢 온라인 (Firebase) / ⚫ 오프라인 (로컬)

### 데이터가 표시되지 않음
- 기간 필터 확인
- 상세 필터 초기화 버튼 클릭
- 페이지 새로고침

### 추가한 브랜드/사이트가 없어짐
- **Firebase 활성화 시**: 모든 기기에서 동일하게 유지됨 ✅
- **Firebase 비활성화 시**: 브라우저 데이터 삭제 시 로컬스토리지도 삭제됨
- Firebase 연결 확인: 우측 상단 🟢 (온라인) / 🔴 (오프라인)
- 시크릿 모드에서는 로컬스토리지만 사용 (Firebase 동기화 가능)

### 다른 기기에서 커스텀 항목이 안 보임
- Firebase 연결 상태 확인 (🟢 온라인)
- 페이지 새로고침
- 브라우저 콘솔(F12)에서 "✅ Firebase에서 커스텀 드롭다운 로드 완료" 확인
- Firebase 인터넷 연결 필요

### 환율이 업데이트되지 않음
- 인터넷 연결 확인
- 🔄 버튼 클릭하여 수동 업데이트
- ExchangeRate-API 서비스 상태 확인
- 업데이트 실패 시 수동 입력 가능

---

## 📧 지원

문제가 발생하거나 추가 기능이 필요하시면 언제든 문의하세요!

**즐거운 거래 관리 되세요! 🎉**